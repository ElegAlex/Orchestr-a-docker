# ==========================================
# Orchestr'A - Variables d'Environnement Production
# ==========================================
#
# IMPORTANT: NE JAMAIS commiter ce fichier avec des vraies valeurs !
# Copier ce fichier vers .env.production et remplir avec vos valeurs.
#
# Usage:
#   cp .env.production.example .env.production
#   nano .env.production  # Éditer et remplir les valeurs
#

# ==========================================
# Application
# ==========================================
NODE_ENV=production
PORT=4000
HOST=0.0.0.0
LOG_LEVEL=info

# ==========================================
# Base de Données PostgreSQL
# ==========================================
POSTGRES_DB=orchestra_prod
POSTGRES_USER=prod_user
POSTGRES_PASSWORD=CHANGEZ_MOI_AVEC_UN_MOT_DE_PASSE_FORT

# Connection string complète (utilisée par Prisma)
DATABASE_URL=postgresql://prod_user:CHANGEZ_MOI_AVEC_UN_MOT_DE_PASSE_FORT@postgres:5432/orchestra_prod?schema=public

# ==========================================
# JWT Authentification
# ==========================================
# GÉNÉRER avec: openssl rand -hex 64
JWT_SECRET=7b8eea5faef2941058d89d320e827c1532c66183b3f4a8e029c0191a7970b445c01418d0475d845fc247b48a7e9a0456c5634bea09d0479cf34be1846cceba59
JWT_REFRESH_SECRET=0637cb4e9d7e850f7c981c21a39e55374d7637154c29f902125c9b6c5c2384769522deef0cc8feece43640605f57eb59888f2cd7e3285fb789617fbeb32f70bc

# Durée de validité des tokens
JWT_ACCESS_EXPIRY=15m
JWT_REFRESH_EXPIRY=30d

# ==========================================
# Redis Cache
# ==========================================
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=CHANGEZ_MOI_AVEC_UN_MOT_DE_PASSE_FORT_REDIS

# ==========================================
# MinIO S3 Storage
# ==========================================
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ROOT_USER=orchestr-a-admin
MINIO_ROOT_PASSWORD=CHANGEZ_MOI_AVEC_UN_MOT_DE_PASSE_FORT_MINIO
MINIO_BUCKET=orchestra-files

# Alias pour backend (compatibilité)
MINIO_ACCESS_KEY=orchestr-a-admin
MINIO_SECRET_KEY=CHANGEZ_MOI_AVEC_UN_MOT_DE_PASSE_FORT_MINIO

# ==========================================
# CORS Configuration
# ==========================================
# URL de votre domaine frontend (sans trailing slash)
CORS_ORIGIN=https://orchestr-a.yourdomain.com

# ==========================================
# Email (Optionnel - pour notifications)
# ==========================================
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=noreply@yourdomain.com
SMTP_PASSWORD=VOTRE_MOT_DE_PASSE_EMAIL
SMTP_FROM_NAME=Orchestr'A
SMTP_FROM_EMAIL=noreply@yourdomain.com

# ==========================================
# Frontend React
# ==========================================
REACT_APP_API_URL=https://orchestr-a.yourdomain.com/api
REACT_APP_ENV=production

# ==========================================
# Monitoring & Sécurité (Optionnel)
# ==========================================
# Sentry DSN pour error tracking
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# Rate limiting
# RATE_LIMIT_TTL=60
# RATE_LIMIT_MAX=100

# ==========================================
# Notes Importantes
# ==========================================
#
# 1. SÉCURITÉ:
#    - Générer tous les secrets avec: openssl rand -hex 64
#    - Utiliser des mots de passe forts (minimum 32 caractères)
#    - Ne JAMAIS commiter .env.production dans Git
#
# 2. POSTGRES_PASSWORD:
#    - Utilisé par PostgreSQL pour créer l'utilisateur
#    - Doit correspondre au mot de passe dans DATABASE_URL
#
# 3. JWT_SECRET & JWT_REFRESH_SECRET:
#    - Doivent être DIFFÉRENTS
#    - Minimum 64 caractères hexadécimaux
#    - Ne JAMAIS les changer en production (invalidera toutes les sessions)
#
# 4. CORS_ORIGIN:
#    - URL complète de votre frontend (https://domain.com)
#    - Pas de trailing slash
#    - Plusieurs origines: séparées par virgule
#
# 5. MINIO:
#    - MINIO_ACCESS_KEY = MINIO_ROOT_USER (même valeur)
#    - MINIO_SECRET_KEY = MINIO_ROOT_PASSWORD (même valeur)
#
